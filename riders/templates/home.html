{% extends "base.html" %}
{% block content %}


<div class="card bg-base-100 shadow">
  <div class="card-body">
  <h2 class="card-title text-primary" >Search Riders</h2>
    <form method="get" action="{% url 'search_riders' %}">
      <div class="d-flex flex-wrap align-items-end" style="gap:12px;">
        <div style="min-width:200px;">
          <label class="form-label d-block">Search by</label>
          <select class="form-select" name="by" id="id_by">
            <option value="name">ADA Rider Name</option>
            <option value="id">ADA Rider ID</option>
          </select>
        </div>

        <div id="name_fields" class="d-flex" style="gap:12px;">
          <div style="min-width:220px;">
            <label class="form-label">First Name</label>
            <input class="form-control" type="text" name="first_name">
          </div>
          <div style="min-width:220px;">
            <label class="form-label">Last Name</label>
            <input class="form-control" type="text" name="last_name">
          </div>
        </div>

        <div id="id_field" style="min-width:220px; display:none;">
          <label class="form-label">ADA ID</label>
          <input class="form-control" type="text" name="ada_id">
        </div>

        <div class="d-flex flex-wrap" style="gap:12px; width:100%; margin-top:20px; margin-right:40px;">
          <button class="btn btn-primary" style="margin-right:25px;" type="submit">Search</button>
          <a class="btn" style="margin-right:25px;" href="{% url 'rider_create' %}">Add New Rider</a>
          <a class="btn btn-outline" style="margin-right:25px;" href="{% url 'finance_transmittal' %}">Finance Transmittal</a>
          <a class="btn btn-outline" style="margin-right:25px;" href="{% url 'finance_detail_report' %}">Finance Detail</a>
        </div>
      </div>
    </form>
  </div>
</div>

<script>
  const bySelect = document.getElementById('id_by');
  const nameFields = document.getElementById('name_fields');
  const idField = document.getElementById('id_field');
  function setGroupVisible(el, visible) {
    // visibility via multiple mechanisms to beat any framework-specific CSS
    el.hidden = !visible;
    el.style.display = visible ? '' : 'none';
    el.classList.toggle('d-none', !visible);
    // Disable inputs in hidden groups so stray values don't submit
    el.querySelectorAll('input, select, textarea').forEach(inp => {
      inp.disabled = !visible;
    });
  }
  function toggleFields() {
    const isId = (bySelect.value || '').toLowerCase() === 'id';
    setGroupVisible(nameFields, !isId);
    setGroupVisible(idField, isId);
  }
  bySelect.addEventListener('change', toggleFields);
  bySelect.addEventListener('input', toggleFields);
  toggleFields();
</script>
{% endblock %}
