{% extends "base.html" %}
{% block content %}
<h2>Finance Transmittal Report</h2>

<form method="get" class="row g-3 mb-3">
  <div class="col-auto">
    <label class="form-label">Start</label>
    <input class="form-control" type="date" name="start"
           value="{{ start|date:'Y-m-d' }}">
  </div>
  <div class="col-auto">
    <label class="form-label">End</label>
    <input class="form-control" type="date" name="end"
           value="{{ end|date:'Y-m-d' }}">
  </div>
  <div class="col-auto align-self-end">
    <button class="btn btn-primary" type="submit">Apply</button>
  </div>
  <div class="col-auto align-self-end">
    <a class="btn btn-secondary" href="?start={{ start|date:'Y-m-d' }}&end={{ end|date:'Y-m-d' }}&format=pdf">Export PDF</a>
  </div>
</form>

<table class="table table-sm table-striped" style="table-layout: fixed;">
  <thead>
    <tr>
      <th style="width:13%">Pay Type</th>
      <th style="width:16%">Purchase Date</th>
      <th style="width:12%">ADA ID</th>
      <th style="width:29%">Name</th>
      <th style="width:8%" class="text-end">Qty</th>
      <th style="width:12%" class="text-end">Amount</th>
      <th style="width:10%">Check #</th>
    </tr>
  </thead>
  <tbody>
    {% for e in entries %}
      <tr>
        <td>{{ e.paytype }}</td>
        <td>{{ e.purchase_date }}</td>
        <td>{{ e.adaid }}</td>
        <td>{{ e.name }}</td>
        <td class="text-end">{{ e.qty }}</td>
        <td class="text-end">${{ e.amount }}</td>
        <td>{{ e.chknum }}</td>
      </tr>
    {% empty %}
      <tr><td colspan="7">No data for this range.</td></tr>
    {% endfor %}
  </tbody>
</table>

<div class="mt-3">
  <strong>Grand Total Qty:</strong> {{ grand_total_qty }}
  &nbsp;&nbsp; <strong>Grand Total Amount:</strong> ${{ grand_total_amount }}
</div>
{% endblock %}
